---
тема: Мигающий светодиод
автор: Григорьев Василий
дата: 2026-02-04
---
# Результат:
- [ ] Создан проект ```02-on-off```
- [ ] Имя устройства и версия прошивки вынесены в отдельный заголовочный файл
- [ ] Объявление функций инициализации, включения и выключения светодиода вынесены в отдельный файл с исходным кодом ```led.h```  в папке ```led```
- [ ] Реализации функций инициализации, включения и выключения светодиода вынесены в отдельный файл с исходным кодом ```led.c``` в папке ```led```
- [ ] Добавьте новый файлы с исходным кодом в ```CMakeLists.txt 
- [ ] При вводе в PUTTY-терминал символа ```e``` - светодиод  включается, а в терминал выводится информационное сообщение, например ```"led enable done"
- [ ] При вводе в PUTTY-терминал символа ```d``` - светодиод  выключается, а в терминал выводится информационное сообщение, например ```"led disable done"
- [ ] При вводе в PUTTY-терминал символа ```v``` - в терминал выводится информация о версии прошивки и имени устройства
- [ ] При вводе в PUTTY-терминал неизвестного символа ```d``` - светодиод  в терминал выводится информационное сообщение с неверно введенным символом и его кодом
# Создание нового проекта
- Создайте новый проект c названием ```02-on-off```
# Вынесение имени устройства и версии прошивки в отдельный заголовочный файл
- Создайте файл ```main.h```
- Добавьте директиву препроцессора, которая гарантирует, что заголовочный файл будет включен в компиляцию **только один раз**, даже если на него есть несколько `#include` в разных местах программы:
``` c
#pragma once
```
  > [!ATTENTION] Внимание!
>По умолчанию эту строчку надо вставлять во все заголовочные файлы, если это не оговорено отдельно
# Объявление функций инициализации, включения и выключения светодиода в заголовочном файле
- Создайте в проекте папку ```led```
- Создайте в нем заголовочный ```led.h```
- Объявите в нем функции не принимающие на вход аргумент и не возвращающие значений с названиями: ```led_init```,```led_enable```,```led_disable```
# Реализация функций инициализации, включения и выключения светодиода
- Подключите заголовочный файл с объявлением функций ```led_init```,```led_enable```,```led_disable```
- Подключите заголовочный файл ```gpio``` из аппаратной библиотеки Pico SDK
``` c
#include "hardware/gpio.h"
```
- Объявите константу, которая указывает, что к какому пину подключен светодиод
- В теле ```led_init``` проинициализируйте нужный GPIO вывод и настройте GPIO вывод как выход
- В теле функции ```led_enable``` реализуйте логику включения светодиода
- В теле функции ```led_disable``` реализуйте логику выключения светодиода
# Добавление новых файлов в CMakeLists.txt
- Добавьте путь к исходному файлу с библиотекой для работы со светодиодом:
``` cmake
${CMAKE_CURRENT_SOURCE_DIR}/led/led.c
```

> [!ATTENTION] Внимание!
> Подумайте в какое именно место в ```CMakeLists.txt``` нужно вставить эту строчку
# Реализация main.c
- Подключите библиотеки из pico SDK для взаимодействия с потоком ввода/вывода и с микроконтроллером
- Подключите свои только что написанные библиотеки:
``` c
#include "main.h"
#include "led/led.h"
```
- В теле ```main``` проинициализируйте систему ввода/вывода
- Проинициализируйте светодиод
- Добавьте в тело бесокнечного цикла считывание символа из терминала
- Добавьте  логику обработки считанного символа
``` c
        switch(symbol)
        {
            case 'e':
	            // Включение светодиода
                break;
            case 'd':
				// Выключение светодиода
                break;
            case 'v':
				// Информация о версии прошивки и имени устройства
                break;   
            default:
                // Информационное сообщение с неверно введенным 
                // символом и его кодом
                break;
        }
```
